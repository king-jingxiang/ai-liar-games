import streamlit as st


def main():
    # 设置页面配置
    st.set_page_config(page_title="Card Game Interface", layout="wide")
    st.title("🎴 AI+骗子旅馆 🎲")

    # 游戏规则部分
    st.header("📖 游戏规则 📖")

    with st.expander("🎯 游戏准备 🎯"):
        st.write("- 每局游戏开始时，系统将从一副特别设计的牌组中向每位玩家分发5张牌。此牌组包含20张牌，具体为：")
        st.write("  - 6张Q（Queen） 👑")
        st.write("  - 6张K（King） 🤴")
        st.write("  - 6张A（Ace） 🃏")
        st.write("  - 2张万能牌 🃠，万能牌会在发牌的时候替换为上述的目标牌，也就是每局最多8张目标牌。")

    with st.expander("🔄 游戏流程 🔄"):
        st.write(
            "- 每轮游戏开始前，系统会随机确定一种牌型作为本局的目标牌 🎴。所有玩家需按照桌面上的座位顺序（顺时针方向）依次行动。")
        st.write("- 行动时，玩家需声明他们将要打出的牌面值 🗣️，但请注意，声明的牌面值必须与当前目标牌相符。")
        st.write("- 每次玩家可以打出1至3张牌 🃏，且至少一张牌，不可以跳过，但这些牌是背面朝上的，其他玩家不能直接看到。")
        st.write(
            "- 当轮到某位玩家时，他可以选择相信前一位玩家的声明并继续游戏 ✅，或者质疑前一位玩家的声明 ❓，要求查看对方打出的牌。如果被质疑方确实撒谎，他们将面临惩罚；若质疑无误，则质疑方不受影响，而被质疑方将受罚。")

    # 其他规则部分
    st.subheader("🚫 惩罚项、🚪 出局规则、🃏 出牌规则、🏆 胜负判定 🏆")
    st.write("""
- **🚫 惩罚项**:
  - 被质疑撒谎的玩家将面临逐步增加的出局概率。
- **🚪 出局规则**:
  - 如果某位玩家因被质疑撒谎而出局，游戏将继续进行，直到只剩一名玩家为止。
- **🃏 出牌规则**:
  - 玩家出牌时必须出目标牌，因为出牌背面朝上，其他玩家看不到，玩家可以用任意牌代替目标牌出牌。
- **🏆 胜负判定**:
  - 游戏持续进行，直至只剩一名玩家手中持有牌为止，此时该玩家即为胜利者;或者作为用户的玩家出局，则次轮游戏结束。
  - 如果在游戏过程中，某位玩家因被质疑撒谎而失去出牌权，这不会立即决定其出局状态，除非该玩家因此而用尽手中所有牌。
    """)

    # 角色设定部分

    roles = {
        "coward": "膽小鬼 🦥",
        "augur": "占卜师 🔮",
        "bold_gambler": "大胆赌徒 🎲",
        "cool_analyzer": "冷静分析者 🧐",
        "cunning_liar": "狡黠骗子 🤡"
    }

    # 角色设定部分
    st.header("🎭 内置的智能体角色特点 🎭")

    for role, name in roles.items():
        with st.expander(f"{name} ({role})"):
            if role == "coward":
                st.write("""
                - **胆小谨慎** 🦥：总是试图保持诚实，避免风险。
                - **小心行动** 🛡️：每轮仅打出一张牌，以减少被质疑的机会。
                - **审慎质疑** ❓：在没有真实牌时，可能会选择质疑或先打出假牌。
                """)
            elif role == "augur":
                st.write("""
                - **神秘占卜** 🔮：通过占卜决定每轮的行动。
                - **遵循直觉** 🌟：根据占卜结果出牌或质疑，完全信任占卜的结果。
                - **随机应变** 🔄：占卜可能指示出真实的牌或假牌，以及质疑上家。
                """)
            elif role == "bold_gambler":
                st.write("""
                - **冒险精神** 🎲：敢于下注，愿意承担风险。
                - **大胆质疑** 💥：即使手中目标牌不多，也可能质疑上家。
                - **快速出牌** 🏃‍♂️：尽可能一次性多出牌，减少手牌数量。
                - **自信伪装** 😎：用非目标牌代替目标牌出牌，并表现得非常自信。
                """)
            elif role == "cool_analyzer":
                st.write("""
                - **冷静观察** 🧐：仔细分析其他玩家的行为和出牌习惯。
                - **明智决策** 🧠：基于分析做出最有利的出牌或质疑决定。
                - **灵活调整** ⚖️：根据局势变化灵活调整出牌数量。
                - **长期规划** 📈：考虑其他玩家被质疑的历史来制定策略。
                """)
            elif role == "cunning_liar":
                st.write("""
                - **善于欺骗** 🤡：经常用非目标牌代替目标牌出牌。
                - **误导他人** 🕵️‍♀️：通过行为和言语让其他玩家产生误判。
                - **适时改变** 🔄：当感到被怀疑时，会适时地改变策略。
                - **心理战术** 🧠：通过话术增加对手的疑虑或吓退对方。
                """)


if __name__ == "__main__":
    main()
